@model IEnumerable<Turnos_Medicos.Models.Turno>

@{
    ViewBag.Title = "Turnos";
}

<h2>Listado de Turnos Diarios</h2>

<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Estado.Nombre)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Fecha)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Hora)
        </th>
        <th>
            Especialidad
        </th>
        <th>
            Medico
        </th>
        <th>
            Paciente
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Descripcion)
        </th>
        <th>
            Consultorio
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Estado.Nombre)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Fecha.Year) / 
            @Html.DisplayFor(modelItem => item.Fecha.Month) /
            @Html.DisplayFor(modelItem => item.Fecha.Day)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Hora.Hours) :
            @if (item.Hora.Minutes < 10)
            {
                <span>0</span>
                @Html.DisplayFor(modelItem => item.Hora.Minutes)
            }
            else
            {
                @Html.DisplayFor(modelItem => item.Hora.Minutes)
            }
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Especialidad.Nombre)
        </td>
        <td>
            @if (!item.MedicoId.Equals(null))
            {
                @Html.DisplayFor(modelItem => item.Medico.Persona.Apellido)
                <span>, </span>
                @Html.DisplayFor(modelItem => item.Medico.Persona.Nombre)
            }
        </td>
        <td>
            @if (!item.PacienteId.Equals(null))
            {
                @Html.DisplayFor(modelItem => item.Paciente.Persona.Apellido)
                <span>, </span>
                @Html.DisplayFor(modelItem => item.Paciente.Persona.Nombre)
            }
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Descripcion)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Consultorio.Nombre)
        </td>
        <td>
            @if (item.PacienteId.Equals(null))
            {
                <input href="/Turnos/Asignar/@item.Id" value="Asignar" class="btn btn-sm btn-success" /><span>|</span>
            }
            else
            {
                <input href="/Turnos/Cancelar/@item.Id" value="Cancelar" class="btn btn-sm btn-default" /><span>|</span>
            }
            <input href="/Turnos/Details/@item.Id" value="Ver" class="btn btn-sm btn-default" /><span>|</span>
            <input href="/Turnos/Edit/@item.Id" value="Modificar" class="btn btn-sm btn-default" />
        </td>
    </tr>
}

</table>
