@model Turnos_Medicos.Models.PacienteObraSocial

@{
    ViewBag.Title = "Crear nueva Obra Social";
    IEnumerable < Turnos_Medicos.Models.ObraSocial> obra_social = ViewBag.ObraSocial;
}

<h2>@ViewBag.Title</h2>


@if (!(Model.ObraSocial != null))
{
<form action="/PacienteObraSociales/Create/@Model.PacienteId" method="get" novalidate="novalidate">

    @Html.AntiForgeryToken()
    <div class="form-horizontal">
        <hr />
        <h3>Buscar</h3>
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        <div class="form-group col-sm-4">
            <label class="control-label col-md-3" for="obra_social">Obra Social:</label>
            <div class="col-md-8">
                <input class="form-control datepicker text-box single-line" data-val="true" id="obra_social" name="obra_social" type="text" value="" maxlength="30">
                <span class="field-validation-valid text-danger" data-valmsg-for="obra_social" data-valmsg-replace="true"></span>
            </div>
        </div>
        <div class="form-group col-sm-4" hidden>
            <div class="col-md-8">
                <input class="form-control datepicker text-box single-line" data-val="true" id="id" name="id" type="number" value="@Model.PacienteId">
            </div>
        </div>
        <div class="form-group col-sm-1">
            <div class="col-md-offset-2 col-md-1">
                <input type="submit" value="Buscar" class="btn btn-info" />
            </div>
        </div>
    </div>
</form>

    if (obra_social != null)
    {
        <table class="table">
            <tr>
                <th>
                    Nombre
                </th>
                <th></th>
            </tr>

            @foreach (var item in obra_social)
            {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.Nombre)
                        </td>
                        <td>
                            <form action="/PacienteObraSociales/Create/@Model.PacienteId" method="get" novalidate="novalidate">
                                <div class="form-group col-sm-4" hidden>
                                    <div class="col-md-8">
                                        <input class="form-control datepicker text-box single-line" data-val="true" id="id_obra_social" name="id_obra_social" type="number" value="@item.Id">
                                    </div>
                                </div>
                                <div class="form-group col-sm-1">
                                    <div class="col-md-offset-2 col-md-1">
                                        <input type="submit" value="Seleccionar" class="btn btn-success" />
                                    </div>
                                </div>
                            </form>
                        </td>
                    </tr>
            }

        </table>
    }
}









@if (Model.ObraSocial != null)
{
using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        <h4>Paciente Obra Social</h4>
        <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        <div class="form-group">
            @Html.LabelFor(model => model.PacienteId, "Paciente", htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.DropDownList("PacienteId", null, htmlAttributes: new { @class = "form-control" })
                @Html.ValidationMessageFor(model => model.PacienteId, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.ObraSocialId, "Obra Social", htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.DropDownList("ObraSocialId", null, htmlAttributes: new { @class = "form-control" })
                @Html.ValidationMessageFor(model => model.ObraSocialId, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.NumeroAfiliado, "Número Afiliado", htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.NumeroAfiliado, new { htmlAttributes = new { @class = "form-control", @type = "number", @min = "1", @max = "999999999999" } })
                @Html.ValidationMessageFor(model => model.NumeroAfiliado, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="Crear" class="btn btn-success" />
            </div>
        </div>
    </div>
}

}



@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}
